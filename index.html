<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sınaq Nəticələri</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#4361ee;
  --success:#06d6a0;
  --danger:#ef476f;
  --bg:#f4f6fb;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,sans-serif;
  background:linear-gradient(135deg,#eef2ff,#e0e7ff);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:16px;
}

.card{
  width:100%;
  max-width:520px;
  background:#fff;
  border-radius:20px;
  box-shadow:0 15px 35px rgba(0,0,0,.1);
  overflow:hidden;
}

.header{
  background:linear-gradient(135deg,#4361ee,#7209b7);
  color:#fff;
  padding:28px;
  text-align:center;
}

.header i{
  font-size:40px;
  margin-bottom:10px;
}

.header h1{
  margin:0;
  font-size:26px;
}

.content{
  padding:24px;
}

label{
  font-weight:600;
  display:block;
  margin-bottom:8px;
}

input{
  width:100%;
  padding:16px;
  font-size:20px;
  border-radius:14px;
  border:2px solid #e5e7eb;
  text-align:center;
  letter-spacing:4px;
}

button{
  width:100%;
  margin-top:16px;
  padding:16px;
  border:none;
  border-radius:14px;
  background:linear-gradient(to right,#4361ee,#3a56d4);
  color:#fff;
  font-size:18px;
  font-weight:600;
  cursor:pointer;
}

button:disabled{
  opacity:.6;
}

.error{
  margin-top:16px;
  background:#fee2e2;
  color:#991b1b;
  padding:14px;
  border-radius:12px;
  display:none;
  text-align:center;
}

.result{
  display:none;
  margin-top:24px;
}

.score-box{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:16px;
}

.badge{
  background:var(--success);
  color:#fff;
  padding:8px 16px;
  border-radius:999px;
  font-weight:700;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(44px,1fr));
  gap:8px;
  max-height:260px;
  overflow:auto;
  margin-bottom:20px;
}

.item{
  border-radius:10px;
  padding:10px 0;
  text-align:center;
  font-weight:700;
}

.ok{
  background:rgba(6,214,160,.15);
  color:#065f46;
}

.no{
  background:rgba(239,71,111,.15);
  color:#991b1b;
}

.answer{
  font-size:12px;
  font-weight:500;
  opacity:.8;
}

.footer{
  text-align:center;
  font-size:13px;
  color:#6b7280;
  padding:16px;
  border-top:1px solid #f1f5f9;
}
</style>
</head>

<body>

<div class="card">
  <div class="header">
    <i class="fas fa-chart-bar"></i>
    <h1>Sınaq Nəticələri</h1>
    <p>Kodu daxil edin</p>
  </div>

  <div class="content">
    <label>6 rəqəmli kod</label>
    <input id="code" maxlength="6" placeholder="123456">

    <button id="btn" onclick="loadResult()">Nəticələri göstər</button>

    <div class="error" id="error">Kod tapılmadı</div>

    <div class="result" id="result">
      <div class="score-box">
        <strong>Nəticə</strong>
        <div class="badge" id="total">0 / 300</div>
      </div>

      <div class="grid" id="grid"></div>
    </div>
  </div>

  <div class="footer">
    Mobil və kompüter üçün uyğundur
  </div>
</div>

<script>
const API =
"https://script.google.com/macros/s/AKfycbx9AgsIh9SlUmIguOh3EbdEqQ0abhT2jgRe942jH9iE3Drys9TeuGgP--dU9SkvnRKzow/exec";

function loadResult(){
  const code=document.getElementById("code").value.trim();
  if(code.length!==6)return;

  document.getElementById("btn").disabled=true;
  document.getElementById("error").style.display="none";

  fetch(API+"?kod="+code)
  .then(r=>r.json())
  .then(d=>{
    document.getElementById("btn").disabled=false;

    if(!d.found){
      document.getElementById("error").style.display="block";
      return;
    }

    const grid=document.getElementById("grid");
    grid.innerHTML="";
    let total=0;

    d.scores.forEach((s,i)=>{
      total+=Number(s);
      const correct=d.correct[i] || "—";

      const div=document.createElement("div");
      div.className="item "+(s>0?"ok":"no");
      div.innerHTML=`${i+1}<div class="answer">${correct}</div>`;
      grid.appendChild(div);
    });

    document.getElementById("total").innerText=total+" / 300";
    document.getElementById("result").style.display="block";
  });
}
</script>

</body>
</html>
